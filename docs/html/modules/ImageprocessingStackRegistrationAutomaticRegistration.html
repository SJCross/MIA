---
layout: default
---

<head>
    <link rel="stylesheet" href="../../css/index.css">
</head>

<body>
<!-- Side navigation -->
<div class="sidenav">
    <a href="../../index.html" class="nav1">Introduction</a>
    <a href="../gettingstarted.html" class="nav1">Getting started</a>
    <a href="../modulelist.html" class="nav1">Modules</a>
    <a href="../macrolist.html" class="nav1">Macros</a>
    <!-- <a href="../extendingmia.html" class="nav1">Extending MIA</a> -->
</div>

<!-- Page content -->
<div class="main">
    <!--The following is replaced automatically by the generated module list-->
    <a href="../modulelist.html">Back to module list</a>
<h1>Automatic registration</h1>
<h2>Description</h2>
<<<<<<< HEAD
Uses SIFT image registration toolbox
<h2>Parameters</h2>
<ul><li><b>Input image</b> (default = "") </li><br><li><b>Apply to input image</b> (default = "true") </li><br><li><b>Output image</b> (default = "") </li><br><li><b>Registration axis</b> (default = "Time") </li><br><li><b>Other axis mode</b> (default = "Independent") </li><br><li><b>Transformation mode</b> (default = "Rigid") </li><br><li><b>Alignment mode</b> (default = "Automatic (feature extraction)") </li><br><li><b>Fill mode</b> (default = "Black") </li><br><li><b>Enable multithreading</b> (default = "true") </li><br><li><b>Relative mode</b> (default = "First frame") </li><br><li><b>Rolling correction</b> (default = "None") </li><br><li><b>Correction interval</b> (default = "1") </li><br><li><b>Reference image</b> (default = "") </li><br><li><b>Calculation source</b> (default = "Internal") </li><br><li><b>External source</b> (default = "") </li><br><li><b>Calculation channel</b> (default = "1") </li><br><li><b>Initial Gaussian blur (px)</b> (default = "1.6") </li><br><li><b>Steps per scale</b> (default = "3") </li><br><li><b>Minimum image size (px)</b> (default = "64") </li><br><li><b>Maximum image size (px)</b> (default = "1024") </li><br><li><b>Feature descriptor size</b> (default = "4") </li><br><li><b>Feature descriptor orientation bins</b> (default = "8") </li><br><li><b>Closest/next closest ratio</b> (default = "0.92") </li><br><li><b>Maximal alignment error (px)</b> (default = "25.0") </li><br><li><b>Inlier ratio</b> (default = "0.05") </li><br></ul>
=======
Apply slice-by-slice (2D) affine-based image registration to a multi-dimensional stack.  Images can be aligned relative to the first frame in the stack, the previous frame or a separate image in the workspace.  The registration transform can also be calculated from a separate stack to the one that it will be applied to.  Registration can be performed along either the time or Z axes.  The non-registered axis (e.g. time axis when registering in Z) can be "linked" (all frames given the same registration) or "independent" (each stack registered separately).<br><br>This module uses the <a href="https://imagej.net/Feature_Extraction">Feature Extraction</a> and <a href="https://imagej.net/Linear_Stack_Alignment_with_SIFT">Linear Stack Alignment with SIFT</a> plugins to detect SIFT ("Scale Invariant Feature Transform") features from the input images and calculate and apply the necessary 2D affine transforms.<br><br>Note: The SIFT-algorithm is protected by U.S. Patent 6,711,293: Method and apparatus for identifying scale invariant features in an image and use of same for locating an object in an image by the University of British Columbia. That is, for commercial applications the permission of the author is required. Anything else is published under the terms of the GPL, so feel free to use it for academic or personal purposes.<br><br>References:<ul><li>Lowe, David G. "Object recognition from local scale-invariant features". <i>Proceedings of the International Conference on Computer Vision</i> <b>2</b> (1999) 1150–1157.</li><li>Lowe, David G. "Distinctive Image Features from Scale-Invariant Keypoints". <i>International Journal of Computer Vision</i> <b>60</b> (2004) 91–110.</li></ul>
<h2>Parameters</h2>
<ul><li><b>Input image</b> (default = "") </li><br><li><b>Apply to input image</b> (default = "true") </li><br><li><b>Output image</b> (default = "") </li><br><li><b>Registration axis</b> (default = "Time") </li><br><li><b>Other axis mode</b> (default = "Independent") </li><br><li><b>Transformation mode</b> (default = "Rigid") </li><br><li><b>Alignment mode</b> (default = "Automatic (feature extraction)") </li><br><li><b>Fill mode</b> (default = "Black") </li><br><li><b>Enable multithreading</b> (default = "true") </li><br><li><b>Relative mode</b> (default = "First frame") </li><br><li><b>Rolling correction</b> (default = "None") </li><br><li><b>Correction interval</b> (default = "1") </li><br><li><b>Reference image</b> (default = "") </li><br><li><b>Calculation source</b> (default = "Internal") </li><br><li><b>External source</b> (default = "") </li><br><li><b>Calculation channel</b> (default = "1") </li><br><li><b>Initial Gaussian blur (px)</b> (default = "1.6") "Accurate localization of keypoints requires initial smoothing of the image. If your images are blurred already, you might lower the initial blur ?0 slightly to get more but eventually less stable keypoints. Increasing ?0 increases the computational cost for Gaussian blur, setting it to ?0=3.2px is equivalent to keep ?0=1.6px and use half maximum image size. Tip: Keep the default value ?0=1.6px as suggested by Lowe (2004).".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br><li><b>Steps per scale</b> (default = "3") "Keypoint candidates are extracted at all scales between maximum image size and minimum image size. This Scale Space is represented in octaves each covering a fixed number of discrete scale steps from ?0 to 2?0. More steps result in more but eventually less stable keypoint candidates. Tip: Keep 3 as suggested by Lowe (2004) and do not use more than 10.".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br><li><b>Minimum image size (px)</b> (default = "64") "The Scale Space stops if the size of the octave would be smaller than minimum image size. Tip: Increase the minimum size to discard large features (i.e. those extracted from looking at an image from far, such as the overall shape).".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br><li><b>Maximum image size (px)</b> (default = "1024") "The Scale Space starts with the first octave equal or smaller than the maximum image size. Tip: By reducing the size, fine scaled features will be discarded. Increasing the size beyond that of the actual images has no effect.".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br><li><b>Feature descriptor size</b> (default = "4") "The SIFT-descriptor consists of n×n gradient histograms, each from a 4×4px block. n is this value. Lowe (2004) uses n=4. We found larger descriptors with n=8 perform better for Transmission Electron Micrographs from serial sections.".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br><li><b>Feature descriptor orientation bins</b> (default = "8") "For SIFT-descriptors, this is the number of orientation bins b per 4×4px block as described above. Tip: Keep the default value b=8 as suggested by Lowe (2004).".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br><li><b>Closest/next closest ratio</b> (default = "0.92") "Correspondence candidates from local descriptor matching are accepted only if the Euclidean distance to the nearest neighbour is significantly smaller than that to the next nearest neighbour. Lowe (2004) suggests a ratio of r=0.8 which requires some increase when matching things that appear significantly distorted.".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br><li><b>Maximal alignment error (px)</b> (default = "25.0") "Matching local descriptors gives many false positives, but true positives are consistent with respect to a common transformation while false positives are not. This consistent set and the underlying transformation are identified using RANSAC. This value is the maximal allowed transfer error of a match to be counted as a good one. Tip: Set this to about 10% of the image size.".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br><li><b>Inlier ratio</b> (default = "0.05") "The ratio of the number of true matches to the number of all matches including both true and false used by RANSAC. 0.05 means that minimally 5% of all matches are expected to be good while 0.9 requires that 90% of the matches were good. Only transformations with this minimal ratio of true consent matches are accepted. Tip: Do not go below 0.05 (and only if 5% is more than about 7 matches) except with a very small maximal alignment error to avoid wrong solutions.".  Description taken from <a href="https://imagej.net/Feature_Extraction">https://imagej.net/Feature_Extraction</a></li><br></ul>
>>>>>>> 026f4146c338a625be98fc607d78e6b64193c2bd

</div>
</body>